var Credits=function(){};Credits.prototype={preload:function(){this.creditCount=0},addCredit:function(e,t){var a={font:"36px Orbitron",fill:"white"},i={font:"32px Orbitron",fill:"white"},o=game.add.text(game.world.centerX,gameHeight+100,t,a),s=game.add.text(game.world.centerX,gameHeight+150,e,i);o.anchor.setTo(.5,.5),o.setShadow(3,3,"rgba(0,0,0,0.75)",5),s.anchor.setTo(.5,.5),s.setShadow(3,3,"rgba(0,0,0,0.75)",5),game.add.tween(o).to({y:-300},1e4,Phaser.Easing.Cubic.Out,!0,3e3*this.creditCount),game.add.tween(s).to({y:-200},1e4,Phaser.Easing.Cubic.Out,!0,3e3*this.creditCount),this.creditCount++},create:function(){this.stage.disableVisibilityChange=!0,"win"!==music.name&&playMusic&&(music.stop(),music=game.add.audio("win"),music.loop=!0,music.play());var e=game.add.sprite(0,0,"menu-bg");this.addCredit("Developer","Jose Dario Sanchez"),this.addCredit("the following artists:","A big thanks to all of"),this.addCredit("Music","Maxstack"),this.addCredit("Zed Sprite","irmirx"),this.addCredit("Walker Sprite","NICKtendo DS"),this.addCredit("Spiderbot Sprite",'Stephen "Redshrike"'),this.addCredit("Nanobot Sprite","GrafxKid"),this.addCredit("Inventory Items Sprites","OceansDream"),this.addCredit("Sound Effects","Little Robot Sound Factory"),this.addCredit("Sound Effects","Michel Baradari"),this.addCredit("Spiderbot Sound Effect","Bart Kelsey"),this.addCredit("Coin Sound Effect","Brandon Morris"),this.addCredit("Weapon Sprites","Mutantleg"),this.addCredit("Phaser.io","Powered By"),this.addCredit(" ","Thanks for playing!"),this.addMenuOption("Back",.1*gameWidth,.9*gameHeight,function(){playSound&&sfxMenuBack.play(),game.state.start("Menu")}),game.add.tween(e).to({alpha:0},35e3,Phaser.Easing.Cubic.Out,!0,35e3)},addMenuOption:function(e,t,a,i){var o=game.add.text(t,a,e,{font:"36px Orbitron",fill:"rgb(165, 187, 255)"});o.anchor.setTo(.5,.5),o.setShadow(3,3,"rgba(0,0,0,0.75)",5);var s=function(e){e.fill="rgb(99,93,140)",o.useHandCursor=!0},r=function(e){e.fill="rgb(165, 187, 255)",o.useHandCursor=!1};o.inputEnabled=!0,o.events.onInputUp.add(i,this),o.events.onInputOver.add(s,this),o.events.onInputOut.add(r,this)}};var GameOver=function(){};GameOver.prototype={init:function(){score>=window.localStorage.getItem("hitechlowlifescore")&&window.localStorage.setItem("hitechlowlifescore",score)},preload:function(){this.optionCount=1},create:function(){game.add.sprite(0,0,"menu-bg");var e=game.add.text(.5*gameWidth,.2*gameHeight,"Game Over",{font:"bold 48px Orbitron",fill:"rgb(174,64,153)",align:"center"});e.setShadow(3,3,"rgba(0,0,0,0.75)",5),e.anchor.set(.5,.5);var t=game.add.text(.5*gameWidth,.4*gameHeight,"Score: "+score+"\nHiScore: "+window.localStorage.getItem("hitechlowlifescore"),{font:"bold 28px Orbitron",fill:"rgb(210,91,105)",align:"center"});t.setShadow(3,3,"rgba(0,0,0,0.75)",5),t.anchor.set(.5,.5),this.createMenu()},createMenu:function(){this.addMenuOption("Play Again",.5*gameWidth,.6*gameHeight,function(){playSound&&sfxMenuForward.play(),this.game.state.start("Play")}),this.addMenuOption("Main Menu",.5*gameWidth,.8*gameHeight,function(){playSound&&sfxMenuForward.play(),this.game.state.start("Menu")})},addMenuOption:function(e,t,a,i){var o=game.add.text(t,a,e,{font:"48px Orbitron",fill:"rgb(165, 187, 255)"});o.anchor.setTo(.5,.5),o.setShadow(3,3,"rgba(0,0,0,0.75)",5);var s=function(e){e.fill="rgb(99,93,140)",o.useHandCursor=!0},r=function(e){e.fill="rgb(165, 187, 255)",o.useHandCursor=!1};o.inputEnabled=!0,o.events.onInputUp.add(i,this),o.events.onInputOver.add(s,this),o.events.onInputOut.add(r,this)}};var introText,Intro=function(){};Intro.prototype={preload:function(){this.introTextContent=["GAME CONTROLS"," ","MOVEMENT: LEFT/RIGHT ARROW KEYS","JUMP/CLIMB: UP ARROW KEY","SHOOT: SPACEBAR","SWITCH WEAPON: ENTER"," ","Are you ready?"],this.line=[],this.wordIndex=0,this.lineIndex=0,this.wordDelay=100,this.lineDelay=200},create:function(){"intro"!==music.name&&playMusic&&(music.stop(),music=game.add.audio("intro"),music.loop=!0,music.play()),game.add.sprite(0,0,"intro-bg"),this.createMenuOptions(),introText=game.add.text(64,32," ",{font:"18px Orbitron",fill:"rgb(165, 187, 255)"}),introText.setShadow(3,3,"rgba(0,0,0,0.75)",5),this.nextLine()},createMenuOptions:function(){this.addMenuOption("Back",.1*gameWidth,.9*gameHeight,function(){playSound&&sfxMenuBack.play(),this.game.state.start("Menu")}),this.addMenuOption("Play",.9*gameWidth,.9*gameHeight,function(){playSound&&sfxMenuForward.play(),this.game.state.start("Play")})},addMenuOption:function(e,t,a,i){var o={font:"36px Orbitron",fill:"rgb(165, 187, 255)"},s=game.add.text(t,a,e,o);s.anchor.setTo(.5,.5),s.setShadow(3,3,"rgba(0,0,0,0.75)",5);var r=function(e){e.fill="rgb(99,93,140)",s.useHandCursor=!0},n=function(e){e.fill="rgb(165, 187, 255)",s.useHandCursor=!1};s.inputEnabled=!0,s.events.onInputUp.add(i,this),s.events.onInputOver.add(r,this),s.events.onInputOut.add(n,this)},nextLine:function(){this.lineIndex!==this.introTextContent.length&&(this.line=this.introTextContent[this.lineIndex].split(" "),this.wordIndex=0,game.time.events.repeat(this.wordDelay,this.line.length,this.nextWord,this),this.lineIndex++)},nextWord:function(){introText.text=introText.text.concat(this.line[this.wordIndex]+" "),this.wordIndex++,this.wordIndex===this.line.length&&(introText.text=introText.text.concat("\n"),game.time.events.add(this.lineDelay,this.nextLine,this))}};var music,playMusic=!0,Load=function(){};Load.prototype={loadJS:function(){game.load.script("Menu","js/Menu.js"),game.load.script("Options","js/Options.js"),game.load.script("Credits","js/Credits.js"),game.load.script("Intro","js/Intro.js"),game.load.script("Play","js/Play.js"),game.load.script("GameOver","js/GameOver.js")},loadAudio:function(){game.load.audio("advanced-simulacra",["audio/music/advanced-simulacra.ogg","audio/music/advanced-simulacra.mp3"]),game.load.audio("by-product",["audio/music/by-product.ogg","audio/music/by-product.mp3"]),game.load.audio("intro",["audio/music/intro.ogg","audio/music/intro.mp3"]),game.load.audio("win",["audio/music/win.ogg","audio/music/win.mp3"]),game.load.audio("sfx-menu-forward",["audio/sfx/itempick.ogg","audio/sfx/itempick.mp3"]),game.load.audio("sfx-menu-back",["audio/sfx/itemback.ogg","audio/sfx/itemback.mp3"]),game.load.audio("sfx-walker-voice",["audio/sfx/walkervoice.ogg","audio/sfx/walkervoice.mp3"]),game.load.audio("sfx-nanobot-jump",["audio/sfx/nanobot.ogg","audio/sfx/nanobot.mp3"]),game.load.audio("sfx-spiderbot",["audio/sfx/spiderbot.ogg","audio/sfx/spiderbot.mp3"]),game.load.audio("sfx-mutant-shocker-voice",["audio/sfx/mutantshockervoice.ogg","audio/sfx/mutantshockervoice.mp3"]),game.load.audio("sfx-mutant-shocker-shock",["audio/sfx/mutantshockershock.ogg","audio/sfx/mutantshockershock.mp3"]),game.load.audio("sfx-money",["audio/sfx/coin.ogg","audio/sfx/coin.mp3"]),game.load.audio("sfx-pistol",["audio/sfx/weapon-pistol.ogg","audio/sfx/weapon-pistol.mp3"]),game.load.audio("sfx-rifle",["audio/sfx/weapon-rifle.ogg","audio/sfx/weapon-rifle.mp3"]),game.load.audio("sfx-laser",["audio/sfx/weapon-laser.ogg","audio/sfx/weapon-laser.mp3"]),game.load.audio("sfx-flamethrower",["audio/sfx/weapon-flamethrower.ogg","audio/sfx/weapon-flamethrower.mp3"]),game.load.audio("sfx-rocket",["audio/sfx/weapon-rocket.ogg","audio/sfx/weapon-rocket.mp3"]),game.load.audio("sfx-out-of-ammo",["audio/sfx/weapon-outofammo.ogg","audio/sfx/weapon-outofammo.mp3"]),game.load.audio("sfx-power-up",["audio/sfx/powerup.ogg","audio/sfx/powerup.mp3"]),game.load.audio("sfx-power-down",["audio/sfx/powerdown.ogg","audio/sfx/powerdown.mp3"])},loadImg:function(){game.load.image("menu-bg","img/ui/menu-bg.png"),game.load.image("intro-bg","img/ui/intro-bg.png"),game.load.image("tileset1","img/levels/tileset1.png"),game.load.image("ladder-m","img/objs/ladder-m.png"),game.load.image("platform","img/objs/platform.png"),game.load.spritesheet("money-item","img/items/money.png",32,32,7),game.load.image("shield-item","img/items/shield.png");for(var e=1;e<=5;e+=1)game.load.image("projectile"+e,"img/projectiles/projectile"+e+".png");game.load.spritesheet("shield-powerup","img/powerups/shield.png",85,85,11),game.load.spritesheet("zed","img/chars/small-zed.png",48,48,48),game.load.spritesheet("walker","img/chars/walker.png",192,226,32),game.load.spritesheet("nanobot","img/chars/nanobot.png",32,32,36),game.load.spritesheet("spiderbot","img/chars/spiderbot.png",64,64,10),game.load.spritesheet("turret","img/chars/turret.png",62,46,5),game.load.spritesheet("mutantshocker","img/chars/mutantshocker.png",256,256,12)},loadJSON:function(){game.load.tilemap("map-lvl-1","json/map-lvl-1.json",null,Phaser.Tilemap.TILED_JSON)},init:function(){game.add.sprite(0,0,"load-bg"),this.status=game.make.text(.5*gameWidth,.4*gameHeight,"Loading game assets...",{fill:"rgb(165, 187, 255)",font:"36px Orbitron"}),this.status.anchor.setTo(.5),this.status.setShadow(3,3,"rgba(0,0,0,0.75)",5),this.loadingBar=game.make.sprite(.5*gameWidth-193.5,.6*gameHeight,"loading")},preload:function(){game.add.existing(this.status),game.add.existing(this.loadingBar),this.load.setPreloadSprite(this.loadingBar),this.loadJS(),this.loadImg(),this.loadAudio(),this.loadJSON()},addStates:function(){game.state.add("Menu",Menu),game.state.add("Credits",Credits),game.state.add("Options",Options),game.state.add("Intro",Intro),game.state.add("Play",Play),game.state.add("GameOver",GameOver)},addAudio:function(){music=game.add.audio("advanced-simulacra"),music.loop=!0,playMusic&&music.play()},addSettings:function(){game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,game.renderer.renderSession.roundPixels=!0,Phaser.Canvas.setImageRenderingCrisp(this.game.canvas),game.physics.startSystem(Phaser.Physics.ARCADE),game.stage.disableVisibilityChange=!1,game.stage.backgroundColor="#000000"},create:function(){this.addStates(),this.addAudio(),this.addSettings(),this.status.setText("Ready"),setTimeout(function(){game.state.start("Menu")},1e3)}};var Menu=function(){};Menu.prototype={create:function(){"advanced-simulacra"!==music.name&&playMusic&&(music.stop(),music=game.add.audio("advanced-simulacra"),music.loop=!0,music.play()),sfxMenuForward=game.add.audio("sfx-menu-forward"),sfxMenuBack=game.add.audio("sfx-menu-back"),this.stage.disableVisibilityChange=!0,game.add.sprite(0,0,"menu-bg");var e=game.add.text(.5*gameWidth,.2*gameHeight,"HiTech Lowlife",{font:"bold 64px Audiowide",fill:"rgb(174,64,153)",align:"center"});e.setShadow(3,3,"rgba(0,0,0,0.75)",5),e.anchor.set(.5),this.createMenu()},createMenu:function(){this.addMenuOption("Start","36px",.5*gameWidth,.45*gameHeight,function(){playSound&&sfxMenuForward.play(),this.game.state.start("Intro")}),this.addMenuOption("Options","36px",.5*gameWidth,.65*gameHeight,function(){playSound&&sfxMenuForward.play(),this.game.state.start("Options")}),this.addMenuOption("Credits","36px",.5*gameWidth,.85*gameHeight,function(){playSound&&sfxMenuForward.play(),this.game.state.start("Credits")}),this.addMenuOption("Home","24px",.1*gameWidth,.9*gameHeight,function(){playSound&&sfxMenuBack.play(),window.location.href="http://www.darzyx.com/"}),this.addMenuOption("GitHub","24px",.9*gameWidth,.9*gameHeight,function(){playSound&&sfxMenuBack.play(),window.location.href="https://github.com/josedarioxyz/HiTechLowlife"})},addMenuOption:function(e,t,a,i,o){var s={font:t+" Orbitron",fill:"rgb(165, 187, 255)"},r=game.add.text(a,i,e,s);r.anchor.setTo(.5,.5),r.setShadow(3,3,"rgba(0,0,0,0.75)",5);var n=function(e){e.fill="rgb(99,93,140)",r.useHandCursor=!0},d=function(e){e.fill="rgb(165, 187, 255)",r.useHandCursor=!1};r.inputEnabled=!0,r.events.onInputUp.add(o,this),r.events.onInputOver.add(n,this),r.events.onInputOut.add(d,this)}};var sound,playSound=!0,scaleGame=!0,Options=function(){};Options.prototype={preload:function(){this.optionCount=1},create:function(){game.add.sprite(0,0,"menu-bg");var e=game.add.text(.5*gameWidth,.2*gameHeight,"Options",{font:"bold 46px Orbitron",fill:"rgb(174,64,153)",align:"center"});e.setShadow(3,3,"rgba(0,0,0,0.75)",5),e.anchor.set(.5,.5),this.createMenu()},createMenu:function(){this.addMenuOption(scaleGame?"No Scale":"Scale",.5*gameWidth,.4*gameHeight,function(e){sfxMenuForward.play(),scaleGame=!scaleGame,e.text=scaleGame?"No Scale":"Scale",scaleGame?game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL:game.scale.scaleMode=Phaser.ScaleManager.NO_SCALE}),this.addMenuOption(playMusic?"Mute Music":"Play Music",.5*gameWidth,.6*gameHeight,function(e){playSound&&sfxMenuForward.play(),playMusic=!playMusic,playMusic&&music.play(),e.text=playMusic?"Mute Music":"Play Music",music.volume=playMusic?1:0}),this.addMenuOption(playSound?"Mute Sound":"Play Sound",.5*gameWidth,.8*gameHeight,function(e){playSound=!playSound,playSound&&sfxMenuForward.play(),e.text=playSound?"Mute Sound":"Play Sound",sound.volume=playSound?1:0}),this.addMenuOption("Back",.1*gameWidth,.9*gameHeight,function(){playSound&&sfxMenuBack.play(),this.game.state.start("Menu")})},addMenuOption:function(e,t,a,i){var o={font:"36px Orbitron",fill:"rgb(165, 187, 255)"},s=game.add.text(t,a,e,o);s.anchor.setTo(.5,.5),s.setShadow(3,3,"rgba(0,0,0,0.5)",5),s.fixedToCamera=!0;var r=function(e){e.fill="rgb(99,93,140)",s.useHandCursor=!0},n=function(e){e.fill="rgb(165, 187, 255)",s.useHandCursor=!1};s.inputEnabled=!0,s.events.onInputUp.add(i,this),s.events.onInputOver.add(r,this),s.events.onInputOut.add(n,this)}};var player,cursors,healthText,pistolAmmoText,rifleAmmoText,laserAmmoText,flameThrowerAmmoText,rocketAmmoText,scoreText,score=0,Play=function(e){};Play.prototype={init:function(){"by-product"!==music.name&&playMusic&&(music.stop(),music=game.add.audio("by-product"),music.loop=!0,music.play()),score=0,this.bg=null,this.map=null,this.backgroundLayer=null,this.collisionLayer=null,this.decorationLayer=null,this.ladders=null,this.platforms=null,this.locked=!1,this.lockedTo=null,this.wasLocked=!1,this.items=null,this.itemsShield=null,this.normalEnemies=null,this.ghostEnemies=null,this.weapons=[],this.currentWeapon=0,game.time.reset()},create:function(){this.createMap(),this.createItemsAndObjects(),this.createWeapons(),this.createEnemies(),this.createPlayer(),this.createHUD()},createMap:function(){this.bg=game.add.sprite(0,0,"menu-bg"),this.bg.fixedToCamera=!0,this.map=game.add.tilemap("map-lvl-1"),this.map.addTilesetImage("tileset1","tileset1"),this.backgroundLayer=this.map.createLayer("backgroundLayer"),this.collisionLayer=this.map.createLayer("collisionLayer"),this.decorationLayer=this.map.createLayer("decorationLayer"),this.map.setCollisionBetween(0,974,!0,this.collisionLayer,!1),this.backgroundLayer.resizeWorld(),game.physics.arcade.gravity.y=0,game.stage.smoothed=!1},createItemsAndObjects:function(){this.ladders=game.add.group(),this.addObjectLadder(86,46),this.platforms=this.add.physicsGroup();var e=new ObjectPlatform(game,67,30,"platform",this.platforms);e.addMotionPath([{x:"+150",xSpeed:2e3,xEase:"Linear",y:"-150",ySpeed:2e3,yEase:"Sine.easeIn"},{x:"-150",xSpeed:2e3,xEase:"Linear",y:"-150",ySpeed:2e3,yEase:"Sine.easeOut"},{x:"-150",xSpeed:2e3,xEase:"Linear",y:"+150",ySpeed:2e3,yEase:"Sine.easeIn"},{x:"+150",xSpeed:2e3,xEase:"Linear",y:"+150",ySpeed:2e3,yEase:"Sine.easeOut"}]),this.platforms.callAll("start"),this.items=game.add.group(),this.addItemMoney(43,21),this.addItemMoney(43,23),this.addItemMoney(43,25),this.addItemMoney(43,27),this.itemsShield=game.add.group(),this.addItemShield(17,31)},createWeapons:function(){this.weapons.push(new Weapon.Pistol(this.game)),this.weapons.push(new Weapon.Rifle(this.game)),this.weapons.push(new Weapon.Laser(this.game)),this.weapons.push(new Weapon.Flamethrower(this.game)),this.weapons.push(new Weapon.Rockets(this.game)),this.currentWeapon=0;for(var e=1;e<this.weapons.length;e++)this.weapons[e].visible=!1;var t=this.input.keyboard.addKey(Phaser.Keyboard.ENTER);t.onDown.add(this.nextWeapon,this)},createEnemies:function(){this.normalEnemies=game.add.physicsGroup(),this.ghostEnemies=game.add.physicsGroup(),this.addEnemyNanobot(18,15),this.addEnemyWalker(67,10),this.addEnemySpiderbot(101,6),this.addEnemySpiderbot(106,6),this.addEnemyTurret(27,3),this.addEnemyMutantShocker(229,25)},createPlayer:function(){player=game.add.sprite(96,240,"zed"),game.physics.enable(player,Phaser.Physics.ARCADE),player.body.setSize(24,45,12,3),player.anchor.setTo(.5,1),player.body.maxVelocity.y=700,player.body.gravity.y=1e3,player.facing="right",player.health=3,player.healthGracePeriod=100,player.isAttacked=!1,player.walkSpeed=175,player.jumpSpeed=400,player.willJump=!1,player.isStanding=!0,player.isFiring=!1,player.isClimbing=!1,player.climbSpeed=100,player.animations.add("walkLeft",[0,1,2,3,4,5],10,!0),player.animations.add("walkRight",[6,7,8,9,10,11],10,!0),player.animations.add("climb",[12,13,22,23],4,!0),player.animations.add("idleLeft",[14,15],4,!0),player.jumpDownLeft=16,player.jumpUpLeft=17,player.jumpUpRight=18,player.jumpDownRight=19,player.animations.add("idleRight",[20,21],4,!0),player.crouchLeft=24,player.shootCrouchLeft=25,player.animations.add("shootIdleLeft",[26,27],4,!0),player.shootJumpDownLeft=28,player.shootJumpUpLeft=29,player.shootJumpUpRight=30,player.shootJumpDownRight=31,player.animations.add("shootIdleRight",[32,33],4,!0),player.shootCrouchRight=34,player.crouchRight=35,player.animations.add("shootWalkLeft",[36,37,38,39,40,41],10,!0),player.animations.add("shootWalkRight",[42,43,44,45,46,47],10,!0),cursors=game.input.keyboard.createCursorKeys(),player.fireButton=game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),game.camera.follow(player,Phaser.Camera.FOLLOW_LOCKON),player.rifleAmmo=100,player.laserAmmo=100,player.flamethrowerAmmo=100,player.rocketAmmo=15,player.shieldTimer=350,player.collideWorldBounds=!1,player.checkWorldBounds=!0,player.events.onOutOfBounds.add(function(){player.health=1,this.hurtPlayer()},this)},createHUD:function(){this.addMenuOption("Quit",.98*gameWidth,.05*gameHeight,function(){playSound&&sfxMenuForward.play(),game.world.setBounds(0,0,gameWidth,gameHeight),this.game.state.start("GameOver")}),scoreText=game.add.text(.5*gameWidth,.05*gameHeight,"Score: "+score,{font:"16px Orbitron",fill:"rgb(165, 187, 255)"}),scoreText.stroke="#000000",scoreText.setShadow(3,3,"rgba(0,0,0,0.75)",5),scoreText.anchor.setTo(.5,.5),scoreText.fixedToCamera=!0,healthText=game.add.text(.5*gameWidth,.1*gameHeight,"Health: "+player.health,{font:"16px Orbitron",fill:"rgb(165, 187, 255)"}),healthText.setShadow(3,3,"rgba(0,0,0,0.75)",5),healthText.anchor.setTo(.5,.5),healthText.fixedToCamera=!0,pistolAmmoText=game.add.text(.02*gameWidth,.05*gameHeight,"Pistol: âˆž",{font:"13px Orbitron",fill:"rgb(165, 187, 255)"}),pistolAmmoText.setShadow(3,3,"rgba(0,0,0,0.75)",5),pistolAmmoText.anchor.setTo(0,.5),pistolAmmoText.fixedToCamera=!0,rifleAmmoText=game.add.text(.02*gameWidth,.1*gameHeight,"Rifle: "+player.rifleAmmo,{font:"13px Orbitron",fill:"rgb(165, 187, 255)"}),rifleAmmoText.setShadow(3,3,"rgba(0,0,0,0.75)",5),rifleAmmoText.anchor.setTo(0,.5),rifleAmmoText.fixedToCamera=!0,laserAmmoText=game.add.text(.02*gameWidth,.15*gameHeight,"Laser: "+player.laserAmmo,{font:"13px Orbitron",fill:"rgb(165, 187, 255)"}),laserAmmoText.setShadow(3,3,"rgba(0,0,0,0.75)",5),laserAmmoText.anchor.setTo(0,.5),laserAmmoText.fixedToCamera=!0,flameThrowerAmmoText=game.add.text(.02*gameWidth,.2*gameHeight,"Flamethrower: "+player.flamethrowerAmmo,{font:"13px Orbitron",fill:"rgb(165, 187, 255)"}),flameThrowerAmmoText.setShadow(3,3,"rgba(0,0,0,0.75)",5),flameThrowerAmmoText.anchor.setTo(0,.5),flameThrowerAmmoText.fixedToCamera=!0,rocketAmmoText=game.add.text(.02*gameWidth,.25*gameHeight,"Rockets: "+player.rocketAmmo,{font:"13px Orbitron",fill:"rgb(165, 187, 255)"}),rocketAmmoText.setShadow(3,3,"rgba(0,0,0,0.75)",5),rocketAmmoText.anchor.setTo(0,.5),rocketAmmoText.fixedToCamera=!0},addMenuOption:function(e,t,a,i){var o={font:"16px Orbitron",fill:"rgb(165, 187, 255)"},s=game.add.text(t,a,e,o);s.anchor.setTo(1,.5),s.setShadow(3,3,"rgba(0,0,0,0.75)",5),s.fixedToCamera=!0;var r=function(e){e.fill="rgb(99,93,140)",s.useHandCursor=!0},n=function(e){e.fill="rgb(165, 187, 255)",s.useHandCursor=!1};s.inputEnabled=!0,s.events.onInputUp.add(i,this),s.events.onInputOver.add(r,this),s.events.onInputOut.add(n,this)},addEnemyWalker:function(e,t){var a=new EnemyWalker(game,e,t);game.add.existing(a),this.normalEnemies.add(a)},addEnemyNanobot:function(e,t){var a=new EnemyNanobot(game,e,t);game.add.existing(a),this.normalEnemies.add(a)},addEnemySpiderbot:function(e,t){var a=new EnemySpiderbot(game,e,t);game.add.existing(a),this.normalEnemies.add(a)},addEnemyTurret:function(e,t){var a=new EnemyTurret(game,e,t);game.add.existing(a),this.normalEnemies.add(a)},addEnemyMutantShocker:function(e,t){var a=new EnemyMutantShocker(game,e,t);game.add.existing(a),this.ghostEnemies.add(a)},addItemMoney:function(e,t){var a=new ItemMoney(game,e,t);game.add.existing(a),this.items.add(a)},addItemShield:function(e,t){var a=new ItemShield(game,e,t);game.add.existing(a),this.itemsShield.add(a)},addObjectLadder:function(e,t){var a=new ObjectLadder(game,e,t);game.add.existing(a),this.ladders.add(a)},addPowerupShield:function(){var e=new PowerupShield(game);game.add.existing(e)},update:function(){this.updatePlayer(),this.updateEnemies(),game.physics.arcade.collide(this.weapons[this.currentWeapon],this.collisionLayer,this.killSprite,null,this)},updatePlayer:function(){return game.physics.arcade.collide(player,this.collisionLayer),this.physics.arcade.collide(player,this.platforms,this.customSep,null,this),player.body.velocity.x=0,this.PlayerMovement(),game.physics.arcade.overlap(player,this.itemsShield,this.addPowerupShield,null,this),player.shieldTimer<=349?void(player.shieldTimer+=1):void(player.healthGracePeriod<=99?player.healthGracePeriod+=1:(game.physics.arcade.overlap(player,this.normalEnemies,this.hurtPlayer,null,this),game.physics.arcade.overlap(player,this.ghostEnemies,this.hurtPlayer,null,this)))},updateEnemies:function(){this.normalEnemies.setAll("tint",16777215),this.ghostEnemies.setAll("tint",16777215),game.physics.arcade.collide(this.normalEnemies,this.collisionLayer),game.physics.arcade.collide(this.normalEnemies,this.normalEnemies),game.physics.arcade.collide(this.ghostEnemies,this.ghostEnemies),game.physics.arcade.overlap(this.normalEnemies,this.weapons[this.currentWeapon],this.hurtEnemy,null,this),game.physics.arcade.overlap(this.ghostEnemies,this.weapons[this.currentWeapon],this.hurtEnemy,null,this)},PlayerMovement:function(){player.isStanding=player.body.blocked.down||player.body.touching.down||this.locked,player.isFiring=player.fireButton.isDown,player.isStanding?cursors.up.isDown?(this.locked&&this.cancelLock(),player.willJump=!0,player.body.velocity.y=-1*player.jumpSpeed,cursors.left.isDown||"left"===player.facing?player.facing="left":player.facing="right"):cursors.left.isDown?(player.body.velocity.x=-1*player.walkSpeed,player.isFiring?player.animations.play("shootWalkLeft"):player.animations.play("walkLeft"),player.facing="left"):cursors.right.isDown?(player.body.velocity.x=player.walkSpeed,player.isFiring?player.animations.play("shootWalkRight"):player.animations.play("walkRight"),player.facing="right"):"left"===player.facing?player.isFiring?player.animations.play("shootIdleLeft"):player.animations.play("idleLeft"):player.isFiring?player.animations.play("shootIdleRight"):player.animations.play("idleRight"):(player.body.velocity.y>0?cursors.left.isDown||"left"===player.facing?player.isFiring?player.frame=player.shootJumpUpLeft:player.frame=player.jumpUpLeft:player.isFiring?player.frame=player.shootJumpUpRight:player.frame=player.jumpUpRight:cursors.left.isDown||"left"===player.facing?player.isFiring?player.frame=player.shootJumpDownLeft:player.frame=player.jumpDownLeft:player.isFiring?player.frame=player.shootJumpDownRight:player.frame=player.jumpDownRight,cursors.left.isDown?(player.body.velocity.x=-1*player.walkSpeed,player.facing="left"):cursors.right.isDown&&(player.body.velocity.x=player.walkSpeed,player.facing="right")),player.isFiring&&this.weapons[this.currentWeapon].fire(player),this.locked&&this.checkLock(),(this.locked||this.wasLocked)&&(player.x+=this.lockedTo.deltaX,player.y=this.lockedTo.y,0!==player.body.velocity.x&&(player.body.velocity.y=0)),player.willJump&&(player.willJump=!1,this.lockedTo&&this.lockedTo.deltaY<0&&this.wasLocked?player.body.velocity.y=-player.jumpSpeed+10*this.lockedTo.deltaY:player.body.velocity.y=-player.jumpSpeed),this.wasLocked&&(this.wasLocked=!1,this.lockedTo.playerLocked=!1,this.lockedTo=null),player.isClimbing?(player.body.velocity.y=0,player.body.allowGravity=!1,cursors.up.isDown?player.body.velocity.y=-100:cursors.down.isDown&&(player.body.velocity.y=100),cursors.left.isDown?player.body.velocity.x=-100:cursors.right.isDown&&(player.body.velocity.x=100)):player.body.allowGravity=!0},hurtPlayer:function(){player.health-=1,player.healthGracePeriod=0,healthText.text="Health: "+player.health,player.health>=1||(healthText.text="Health: X",player.kill(),setTimeout(function(){game.world.setBounds(0,0,gameWidth,gameHeight),game.state.start("GameOver")},2e3))},hurtEnemy:function(e,t){e.health--,t.kill(),e.tint=16711680},debugGame:function(){game.debug.body(player),this.normalEnemies.forEachAlive(this.renderGroup,this),this.ghostEnemies.forEachAlive(this.renderGroup,this),this.ladders.forEachAlive(this.renderGroup,this),this.platforms.forEachAlive(this.renderGroup,this),this.items.forEachAlive(this.renderGroup,this),this.itemsShield.forEachAlive(this.renderGroup,this),this.collisionLayer.debug=!0},render:function(){},renderGroup:function(e){game.debug.body(e)},customSep:function(e,t){!this.locked&&e.body.velocity.y>0&&(this.locked=!0,this.lockedTo=t,t.playerLocked=!0,e.body.velocity.y=0)},checkLock:function(){player.body.velocity.y=0,(player.body.right<this.lockedTo.body.x||player.body.x>this.lockedTo.body.right)&&this.cancelLock()},cancelLock:function(){this.wasLocked=!0,this.locked=!1},nextWeapon:function(){this.currentWeapon>9?this.weapons[this.currentWeapon].reset():(this.weapons[this.currentWeapon].visible=!1,this.weapons[this.currentWeapon].callAll("reset",null,0,0),this.weapons[this.currentWeapon].setAll("exists",!1)),this.currentWeapon++,this.currentWeapon===this.weapons.length&&(this.currentWeapon=0),this.weapons[this.currentWeapon].visible=!0},killSprite:function(e,t){e.kill()}};var EnemyWalker=function(e,t,a){t*=16,a*=16,this.health=100,this.scoreValue=100*this.health,Phaser.Sprite.call(this,e,t,a,"walker"),e.physics.enable(this,Phaser.Physics.ARCADE),this.enableBody=!0,this.body.gravity.y=1e3,this.body.setSize(112,170,40,56),this.anchor.set(.5,1),this.animations.add("walk-left",[0,1,2,3,4,5,6,7],8,!0),this.animations.add("walk-right",[15,14,13,12,11,10,9,8],8,!0),this.animations.add("shoot-left",[16,17,18],1,!0),this.animations.add("shoot-right",[21,20,19],1,!0),this.sfxWalkerVoice=e.add.audio("sfx-walker-voice"),this.playedSFXWalkerVoice=!1,this.body.bounce.y=0,this.body.bounce.x=1,this.body.collideWorldBounds=!0,this.body.velocity.x=60};EnemyWalker.prototype=Object.create(Phaser.Sprite.prototype),EnemyWalker.prototype.constructor=EnemyWalker,EnemyWalker.prototype.update=function(){Math.abs(player.body.position.x-this.body.position.x)<350&&Math.abs(player.body.position.y-this.body.position.y)<350&&(this.playedSFXWalkerVoice||(playSound&&this.sfxWalkerVoice.play(),this.playedSFXWalkerVoice=!0)),this.body.velocity.x<60&&this.body.velocity.x>0?this.body.velocity.x=-60:this.body.velocity.x<0&&this.body.velocity.x>-60&&(this.body.velocity.x=60),this.body.velocity.x<0?this.animations.play("walk-left"):this.body.velocity.x>0&&this.animations.play("walk-right"),this.health<=0&&(this.destroy(),score+=this.scoreValue,scoreText.text="Score: "+score)};var EnemyNanobot=function(e,t,a){t*=16,a*=16,this.health=3,this.scoreValue=100*this.health,this.nanobotJumpTimer=0,Phaser.Sprite.call(this,e,t,a,"nanobot"),e.physics.enable(this,Phaser.Physics.ARCADE),this.enableBody=!0,this.body.gravity.y=1e3,this.body.setSize(14,18,9,14),this.anchor.set(.5,1),this.animations.add("walk-left",[17,16,15,14,13,12],30,!0),this.animations.add("walk-right",[18,19,20,21,22,23],30,!0),this.sfxNanobotJump=e.add.audio("sfx-nanobot-jump"),this.body.bounce.y=.5,this.body.bounce.x=1,this.body.collideWorldBounds=!0,this.body.velocity.x=120};EnemyNanobot.prototype=Object.create(Phaser.Sprite.prototype),EnemyNanobot.prototype.constructor=EnemyNanobot,EnemyNanobot.prototype.update=function(){this.body.velocity.x<100&&this.body.velocity.x>0?this.body.velocity.x=-100:this.body.velocity.x<0&&this.body.velocity.x>-100&&(this.body.velocity.x=100),this.body.velocity.x<0?this.animations.play("walk-left"):this.body.velocity.x>0&&this.animations.play("walk-right"),this.nanobotJumpTimer+=1,Math.abs(player.body.position.x-this.body.position.x)<100&&Math.abs(player.body.position.y-this.body.position.y)<100&&this.nanobotJumpTimer>=100&&(playSound&&this.sfxNanobotJump.play(),this.body.velocity.y=-350,this.nanobotJumpTimer=0),this.health<=0&&(this.destroy(),score+=this.scoreValue,scoreText.text="Score: "+score)};var EnemySpiderbot=function(e,t,a){t*=16,a*=16,this.health=5,this.scoreValue=100*this.health,Phaser.Sprite.call(this,e,t,a,"spiderbot"),e.physics.enable(this,Phaser.Physics.ARCADE),this.anchor.set(.5,.5),this.enableBody=!0,this.animations.add("attack",[0,1,2,3],4,!0),this.animations.add("walk",[4,5,6,7,8,9],24,!0),this.sfxSpiderbot=e.add.audio("sfx-spiderbot"),this.body.setSize(32,32,16,16),this.body.collideWorldBounds=!0,this.body.allowGravity=!1};EnemySpiderbot.prototype=Object.create(Phaser.Sprite.prototype),EnemySpiderbot.prototype.constructor=EnemySpiderbot,EnemySpiderbot.prototype.update=function(){Math.abs(player.body.position.x-this.body.position.x)<250&&Math.abs(player.body.position.y-this.body.position.y)<250?(this.rotation=game.physics.arcade.angleToXY(this,player.body.position.x,player.body.position.y),playSound&&this.sfxSpiderbot.play(),game.physics.arcade.moveToXY(this,player.body.position.x,player.body.position.y,100),this.animations.play("walk")):(this.body.velocity.x=0,this.body.velocity.y=0,this.frame=0),this.health<=0&&(this.destroy(),score+=this.scoreValue,scoreText.text="Score: "+score)};var EnemyTurret=function(e,t,a){t*=16,a*=16,this.health=3,this.scoreValue=100*this.health,this.isOn=!0,this.fireRate=2e3,this.NextFire=0,Phaser.Sprite.call(this,e,t,a,"turret"),e.physics.enable(this,Phaser.Physics.ARCADE),this.anchor.set(.5,.5),this.enableBody=!0,this.animations.add("pulsate",[0,1,2,3],2,!0),this.body.setSize(32,32,15,7),this.body.immovable=!0,this.body.collideWorldBounds=!0,this.body.allowGravity=!1};EnemyTurret.prototype=Object.create(Phaser.Sprite.prototype),EnemyTurret.prototype.constructor=EnemyNanobot,EnemyTurret.prototype.update=function(){Math.abs(player.body.position.x-this.body.position.x)<150?(this.rotation=game.physics.arcade.angleToXY(this,player.body.position.x,player.body.position.y),this.isOn&&(this.frame=4)):this.animations.play("pulsate"),this.health<=0&&(this.destroy(),score+=this.scoreValue,scoreText.text="Score: "+score)};var EnemyMutantShocker=function(e,t,a){t*=16,a*=16,this.health=100,this.scoreValue=100*this.health,Phaser.Sprite.call(this,e,t,a,"mutantshocker"),e.physics.enable(this,Phaser.Physics.ARCADE),this.anchor.set(.5,.5),this.enableBody=!0,this.animations.add("chase",[0,1,2,3,4,5,6,7],11,!0),this.animations.add("idle",[8,9,10,11],11,!0),this.sfxMutantShockerVoice=e.add.audio("sfx-mutant-shocker-voice"),this.sfxMutantShockerShock=e.add.audio("sfx-mutant-shocker-shock"),this.playedSFXMutantShockerVoice=!1,this.body.setCircle(80,48,48),this.body.collideWorldBounds=!0,this.body.allowGravity=!1};EnemyMutantShocker.prototype=Object.create(Phaser.Sprite.prototype),EnemyMutantShocker.prototype.constructor=EnemyMutantShocker,EnemyMutantShocker.prototype.update=function(){Math.abs(player.body.position.x-this.body.position.x)<350&&Math.abs(player.body.position.y-this.body.position.y)<350?(this.rotation=game.physics.arcade.angleToXY(this,player.body.position.x,player.body.position.y),
playSound&&(this.playedSFXMutantShocker?this.sfxMutantShockerShock.play():(this.sfxMutantShockerVoice.play(),this.playedSFXMutantShocker=!0)),game.physics.arcade.moveToXY(this,player.body.position.x,player.body.position.y,100),this.animations.play("chase")):(this.animations.play("idle"),this.body.velocity.x=0,this.body.velocity.y=0,this.frame=0),this.health<=0&&(this.destroy(),score+=this.scoreValue,scoreText.text="Score: "+score)};var ItemMoney=function(e,t,a){t*=16,a*=16,this.scoreValue=50,Phaser.Sprite.call(this,e,t,a,"money-item"),e.physics.enable(this,Phaser.Physics.ARCADE),this.anchor.set(.5,.5),this.enableBody=!0,this.body.setSize(16,16,8,8),this.animations.add("hover",[0,1,2,3,4,5,6,7,8],8,!0),this.sfxMoney=e.add.audio("sfx-money"),this.body.immovable=!0,this.body.allowGravity=!1,this.animations.play("hover")};ItemMoney.prototype=Object.create(Phaser.Sprite.prototype),ItemMoney.prototype.constructor=ItemMoney,ItemMoney.prototype.update=function(){var e=game.physics.arcade.overlap(player,this,null,null,this);e&&(this.kill(),this.destroy(),playSound&&this.sfxMoney.play(),score+=this.scoreValue,scoreText.text="Score: "+score)};var ItemShield=function(e,t,a){t*=16,a*=16,this.scoreValue=100,Phaser.Sprite.call(this,e,t,a,"shield-item"),e.physics.enable(this,Phaser.Physics.ARCADE),this.anchor.set(.5,.5),this.enableBody=!0,this.body.setSize(16,16,0,0),this.sfxPowerUp=e.add.audio("sfx-power-up"),this.body.immovable=!0,this.body.allowGravity=!1};ItemShield.prototype=Object.create(Phaser.Sprite.prototype),ItemShield.prototype.constructor=ItemShield,ItemShield.prototype.update=function(){var e=game.physics.arcade.overlap(player,this,null,null,this);e&&(this.kill(),this.destroy(),playSound&&this.sfxPowerUp.play(),score+=this.scoreValue,scoreText.text="Score: "+score)};var ObjectLadder=function(e,t,a){t*=16,a*=16,Phaser.Sprite.call(this,e,t,a,"ladder-m"),e.physics.enable(this,Phaser.Physics.ARCADE),this.anchor.set(.5,1),this.enableBody=!0,this.body.immovable=!0,this.body.allowGravity=!1};ObjectLadder.prototype=Object.create(Phaser.Sprite.prototype),ObjectLadder.prototype.constructor=ObjectLadder,ObjectLadder.prototype.update=function(){var e=game.physics.arcade.overlap(player,this,null,null,this);e&&cursors.up.isDown?player.isClimbing=!0:e||(player.isClimbing=!1)};var ObjectPlatform=function(e,t,a,i,o){t*=16,a*=16,"undefined"==typeof o&&(o=e.world),Phaser.Sprite.call(this,e,t,a,i),e.physics.enable(this,Phaser.Physics.ARCADE),this.enableBody=!0,this.body.setSize(150,25,0,0),this.anchor.set(.5,0),this.body.customSeparateX=!0,this.body.customSeparateY=!0,this.body.allowGravity=!1,this.body.immovable=!0,this.playerLocked=!1,o.add(this)};ObjectPlatform.prototype=Object.create(Phaser.Sprite.prototype),ObjectPlatform.prototype.constructor=ObjectPlatform,ObjectPlatform.prototype.addMotionPath=function(e){this.tweenX=game.add.tween(this.body),this.tweenY=game.add.tween(this.body);for(var t=0;t<e.length;t++)this.tweenX.to({x:e[t].x},e[t].xSpeed,e[t].xEase),this.tweenY.to({y:e[t].y},e[t].ySpeed,e[t].yEase);this.tweenX.loop(),this.tweenY.loop()},ObjectPlatform.prototype.start=function(){this.tweenX.start(),this.tweenY.start()},ObjectPlatform.prototype.stop=function(){this.tweenX.stop(),this.tweenY.stop()};var Projectile=function(e,t){Phaser.Sprite.call(this,e,0,0,t),this.texture.baseTexture.scaleMode=PIXI.scaleModes.NEAREST,this.anchor.set(.5,.5),this.checkWorldBounds=!0,this.outOfBoundsKill=!0,this.exists=!1,this.tracking=!1,this.scaleSpeed=0};Projectile.prototype=Object.create(Phaser.Sprite.prototype),Projectile.prototype.constructor=Projectile,Projectile.prototype.fire=function(e,t,a,i,o,s){o=o||0,s=s||0,this.reset(e,t),this.scale.set(1),this.game.physics.arcade.velocityFromAngle(a,i,this.body.velocity),this.angle=a,this.body.gravity.set(o,s)},Projectile.prototype.update=function(){this.tracking&&(this.rotation=Math.atan2(this.body.velocity.y,this.body.velocity.x)),this.scaleSpeed>0&&(this.scale.x+=this.scaleSpeed,this.scale.y+=this.scaleSpeed)};var Weapon={};Weapon.fireAmmo=function(e,t,a,i,o,s,r,n,d){r=r||0,n=n||0;var l=e.getFirstExists(!1);l&&(l.fire(t,a,i,s*o,r,n),l.scale.setTo(s,1)),d&&(e.nextFire=e.game.time.time+e.fireRate)},Weapon.Pistol=function(e){Phaser.Group.call(this,e,e.world,"Pistol",!1,!0,Phaser.Physics.ARCADE),this.sfxPistol=e.add.audio("sfx-pistol"),this.nextFire=0,this.projectileSpeed=600,this.fireRate=500,this.dir=1;for(var t=0;t<64;t++)this.add(new Projectile(e,"projectile1"),!0);return this},Weapon.Pistol.prototype=Object.create(Phaser.Group.prototype),Weapon.Pistol.prototype.constructor=Weapon.Pistol,Weapon.Pistol.prototype.fire=function(e){if(!(this.game.time.time<this.nextFire)){"left"===e.facing?this.dir=-1:this.dir=1;var t=e.x+this.dir*e.width/2,a=e.y-e.height/2;Weapon.fireAmmo(this,t,a,0,this.projectileSpeed,this.dir,0,0,!0),playSound&&this.sfxPistol.play()}},Weapon.Rifle=function(e){Phaser.Group.call(this,e,e.world,"Rifle",!1,!0,Phaser.Physics.ARCADE),this.sfxRifle=e.add.audio("sfx-rifle"),this.nextFire=0,this.projectileSpeed=600,this.fireRate=40,this.dir=1;for(var t=0;t<32;t++)this.add(new Projectile(e,"projectile2"),!0);return this},Weapon.Rifle.prototype=Object.create(Phaser.Group.prototype),Weapon.Rifle.prototype.constructor=Weapon.Rifle,Weapon.Rifle.prototype.fire=function(e){if(!(this.game.time.time<this.nextFire||player.rifleAmmo<=0)){"left"===e.facing?this.dir=-1:this.dir=1;var t=e.x+this.dir*e.width/2,a=e.y-e.height/2+this.game.rnd.between(-7,7);Weapon.fireAmmo(this,t,a,0,this.projectileSpeed,this.dir,0,0,!0),player.rifleAmmo-=1,rifleAmmoText.text="Rifle: "+player.rifleAmmo,playSound&&this.sfxRifle.play()}},Weapon.Laser=function(e){Phaser.Group.call(this,e,e.world,"Laser",!1,!0,Phaser.Physics.ARCADE),this.sfxLaser=e.add.audio("sfx-laser"),this.nextFire=0,this.projectileSpeed=1e3,this.fireRate=45,this.dir=1;for(var t=0;t<64;t++)this.add(new Projectile(e,"projectile3"),!0);return this},Weapon.Laser.prototype=Object.create(Phaser.Group.prototype),Weapon.Laser.prototype.constructor=Weapon.Laser,Weapon.Laser.prototype.fire=function(e){if(!(this.game.time.time<this.nextFire||player.laserAmmo<=0)){"left"===e.facing?this.dir=-1:this.dir=1;var t=e.x+this.dir*e.width/2,a=e.y-e.height/2;Weapon.fireAmmo(this,t,a,0,this.projectileSpeed,this.dir,0,0,!0),player.laserAmmo-=1,laserAmmoText.text="Laser: "+player.laserAmmo,playSound&&this.sfxLaser.play()}},Weapon.Flamethrower=function(e){Phaser.Group.call(this,e,e.world,"Flamethrower",!1,!0,Phaser.Physics.ARCADE),this.sfxFlamethrower=e.add.audio("sfx-flamethrower"),this.nextFire=0,this.projectileSpeed=500,this.fireRate=40,this.dir=1,this.Flamethrower=Phaser.ArrayUtils.numberArrayStep(-800,800,200),this.Flamethrower=this.Flamethrower.concat(Phaser.ArrayUtils.numberArrayStep(800,-800,-200)),this.flamethrowerIndex=0;for(var t=0;t<64;t++)this.add(new Projectile(e,"projectile4"),!0);return this},Weapon.Flamethrower.prototype=Object.create(Phaser.Group.prototype),Weapon.Flamethrower.prototype.constructor=Weapon.Flamethrower,Weapon.Flamethrower.prototype.fire=function(e){if(!(this.game.time.time<this.nextFire||player.flamethrowerAmmo<=0)){"left"===e.facing?this.dir=-1:this.dir=1;var t=e.x+this.dir*e.width/2,a=e.y-e.height/2,i=this.Flamethrower[this.flamethrowerIndex];Weapon.fireAmmo(this,t,a,0,this.projectileSpeed,this.dir,0,i,!0),player.flamethrowerAmmo-=1,flameThrowerAmmoText.text="Flamethrower: "+player.flamethrowerAmmo,this.flamethrowerIndex++,this.flamethrowerIndex===this.Flamethrower.length&&(this.flamethrowerIndex=0),playSound&&this.sfxFlamethrower.play()}},Weapon.Rockets=function(e){Phaser.Group.call(this,e,e.world,"Rockets",!1,!0,Phaser.Physics.ARCADE),this.sfxRocket=e.add.audio("sfx-rocket"),this.nextFire=0,this.projectileSpeed=300,this.fireRate=800,this.dir=1;for(var t=0;t<32;t++)this.add(new Projectile(e,"projectile5"),!0);return this.setAll("tracking",!0),this},Weapon.Rockets.prototype=Object.create(Phaser.Group.prototype),Weapon.Rockets.prototype.constructor=Weapon.Rockets,Weapon.Rockets.prototype.fire=function(e){if(!(this.game.time.time<this.nextFire||player.rocketAmmo<=0)){"left"===e.facing?this.dir=-1:this.dir=1;var t=e.x+this.dir*e.width/2,a=e.y-e.height/2;Weapon.fireAmmo(this,t,a,0,this.dir*this.projectileSpeed,1,0,-800,!0),player.rocketAmmo-=1,rocketAmmoText.text="Rockets: "+player.rocketAmmo,playSound&&this.sfxRocket.play()}};var PowerupShield=function(e){Phaser.Sprite.call(this,e,player.body.position.x+player.body.width/2,player.body.position.y+player.body.height/2,"shield-powerup"),this.anchor.setTo(.5,.5),this.animations.add("waves",[0,1,2,3,4,5,6,7,8,9,10],5,!0),this.sfxPowerDown=e.add.audio("sfx-power-down"),player.shieldTimer=0,healthText.addColor("rgb(0, 255, 200)",0),this.animations.play("waves")};PowerupShield.prototype=Object.create(Phaser.Sprite.prototype),PowerupShield.prototype.constructor=PowerupShield,PowerupShield.prototype.update=function(){var e=99-Math.floor(100*player.shieldTimer/350);healthText.text=e.toString()+"%",this.position.x=player.body.position.x+player.body.width/2,this.position.y=player.body.position.y+player.body.height/2,player.shieldTimer>=350&&(playSound&&this.sfxPowerDown.play(),this.kill(),this.destroy(),healthText.text="Health: "+player.health,healthText.addColor("rgb(165, 187, 255)",0))};var gameWidth=640,gameHeight=360,game=new Phaser.Game(gameWidth,gameHeight,Phaser.CANVAS,"HiTech Lowlife"),Start=function(e){};Start.prototype={preload:function(){game.load.image("load-bg","img/ui/intro-bg.png"),game.load.image("loading","img/ui/loading.png"),game.load.script("Load","js/Load.js"),game.load.script("WebFont","//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js")},create:function(){WebFont.load({google:{families:["Aldrich","Audiowide","Share Tech Mono","Orbitron","VT323"]}}),game.state.add("Load",Load),game.state.start("Load")}},game.state.add("Start",Start),game.state.start("Start");